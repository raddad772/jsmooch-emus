set(CMAKE_C_STANDARD 11)
#set(CMAKE_C_FLAGS "$CMAKE_C_FLAGS -Wincompatible-pointer-types")

set(SOURCE_LIST
        "src/component/audio/ay_3_8910/ay_3_8910.c"
        "src/component/audio/ay_3_8910/ay_3_8910.h"
        "src/component/audio/gb_apu/gb_apu.c"
        "src/component/audio/gb_apu/gb_apu.h"
        "src/component/audio/nes_apu/nes_apu.c"
        "src/component/audio/nes_apu/nes_apu.h"
        "src/component/audio/sn76489/sn76489.c"
        "src/component/audio/sn76489/sn76489.h"
        "src/component/audio/ym2612/ym2612.c"
        "src/component/audio/ym2612/ym2612.h"
        "src/component/controller/genesis6/genesis6.c"
        "src/component/controller/genesis6/genesis6.h"
        "src/component/controller/nes/nes_joypad.c"
        "src/component/controller/nes/nes_joypad.h"
        "src/component/controller/sms/sms_gamepad.c"
        "src/component/controller/sms/sms_gamepad.h"
        "src/component/controller/snes/snes_joypad.c"
        "src/component/controller/snes/snes_joypad.h"
        "src/component/controller/genesis3/genesis3.c"
        "src/component/controller/genesis3/genesis3.h"
        "src/component/cpu/arm7tdmi/arm7tdmi_decode.c"
        "src/component/cpu/arm7tdmi/arm7tdmi_decode.h"
        "src/component/cpu/arm7tdmi/arm7tdmi_instructions.c"
        "src/component/cpu/arm7tdmi/arm7tdmi_instructions.h"
        "src/component/cpu/arm7tdmi/arm7tdmi.c"
        "src/component/cpu/arm7tdmi/arm7tdmi.h"
        "src/component/cpu/arm7tdmi/thumb_instructions.c"
        "src/component/cpu/arm7tdmi/thumb_instructions.h"
        "src/component/cpu/arm7tdmi/thumb_disassembler.c"
        "src/component/cpu/arm7tdmi/thumb_disassembler.h"
        "src/component/cpu/arm7tdmi/armv4_disassembler.c"
        "src/component/cpu/arm7tdmi/armv4_disassembler.h"
        "src/component/cpu/arm946es/arm946es.c"
        "src/component/cpu/arm946es/arm946es.h"
        "src/component/cpu/arm946es/thumb2_instructions.c"
        "src/component/cpu/arm946es/thumb2_instructions.h"
        "src/component/cpu/arm946es/arm946es_decode.c"
        "src/component/cpu/arm946es/arm946es_decode.h"
        "src/component/cpu/arm946es/arm946es_instructions.c"
        "src/component/cpu/arm946es/arm946es_instructions.h"
        "src/component/cpu/arm946es/armv5_disassembler.c"
        "src/component/cpu/arm946es/armv5_disassembler.h"
        "src/component/cpu/arm946es/nds_cp15.c"
        "src/component/cpu/arm946es/thumb2_disassembler.c"
        "src/component/cpu/arm946es/thumb2_disassembler.h"
        "src/component/cpu/huc6280/huc6280.c"
        "src/component/cpu/huc6280/huc6280.h"
        "src/component/cpu/huc6280/huc6280_misc.h"
        "src/component/cpu/huc6280/huc6280_opcodes.c"
        "src/component/cpu/huc6280/huc6280_opcodes.h"
        "src/component/cpu/m6502/m6502.c"
        "src/component/cpu/m6502/m6502_disassembler.c"
        "src/component/cpu/m6502/nesm6502_opcodes.h"
        "src/component/cpu/m6502/nesm6502_opcodes.c"
        "src/component/cpu/m6502/m6502_opcodes.c"
        "src/component/cpu/m6502/m6502_opcodes.h"
        "src/component/cpu/m68000/m68000.c"
        "src/component/cpu/m68000/m68000.h"
        "src/component/cpu/m68000/m68000_internal.h"
        "src/component/cpu/m68000/m68000_instructions.c"
        "src/component/cpu/m68000/m68000_instructions.h"
        "src/component/cpu/m68000/m68000_disassembler.c"
        "src/component/cpu/m68000/m68000_disassembler.h"
        "src/component/cpu/m68000/m68000_internal.c"
        "src/component/cpu/m680x0-fast/m680x0.h"
        "src/component/cpu/sh2/sh2_interpreter.c"
        "src/component/cpu/sh2/sh2_interpreter.h"
        "src/component/cpu/sh4/sh4_interpreter.c"
        "src/component/cpu/sh4/sh4_interpreter.h"
        "src/component/cpu/sh4/sh4_interpreter.h"
        "src/component/cpu/sh4/sh4_interpreter_opcodes.c"
        "src/component/cpu/sh4/sh4_interpreter_opcodes.h"
        "src/component/cpu/sh4/sh4_disassembler.c"
        "src/component/cpu/sh4/sh4_disassembler.h"
        "src/component/cpu/sh4/fsca.c"
        "src/component/cpu/sh4/fsca.h"
        "src/component/cpu/sh4/tmu.c"
        "src/component/cpu/sh4/tmu.h"
        "src/component/cpu/sh4/tmu.c"
        "src/component/cpu/sh4/sh4_interrupts.c"
        "src/component/cpu/sh4/sh4_interrupts.h"
        "src/component/cpu/sm83/sm83.c"
        "src/component/cpu/sm83/sm83.h"
        "src/component/cpu/sm83/sm83_misc.h"
        "src/component/cpu/sm83/sm83_opcodes.c"
        "src/component/cpu/sm83/sm83_opcodes.h"
        "src/component/cpu/sm83/sm83_disassembler.c"
        "src/component/cpu/spc700/spc700.c"
        "src/component/cpu/spc700/spc700.h"
        "src/component/cpu/spc700/spc700_boot_rom.h"
        "src/component/cpu/spc700/spc700_generated_opcodes.c"
        "src/component/cpu/spc700/spc700_disassembler.c"
        "src/component/cpu/spc700/spc700_disassembler.h"
        "src/component/cpu/r3000/gte.c"
        "src/component/cpu/r3000/gte.h"
        "src/component/cpu/r3000/r3000_multiplier.c"
        "src/component/cpu/r3000/r3000_multiplier.h"
        "src/component/cpu/r3000/r3000_instructions.c"
        "src/component/cpu/r3000/r3000_instructions.h"
        "src/component/cpu/r3000/r3000_disassembler.c"
        "src/component/cpu/r3000/r3000_disassembler.h"
        "src/component/cpu/r3000/r3000.c"
        "src/component/cpu/r3000/r3000.h"
        "src/component/cpu/wdc65816/wdc65816.c"
        "src/component/cpu/wdc65816/wdc65816.h"
        "src/component/cpu/wdc65816/wdc65816_disassembler.c"
        "src/component/cpu/wdc65816/wdc65816_disassembler.h"
        "src/component/cpu/wdc65816/wdc65816_generated_opcodes.c"
        "src/component/cpu/z80/z80.c"
        "src/component/cpu/z80/z80.h"
        "src/component/cpu/z80/z80_disassembler.c"
        "src/component/cpu/z80/z80_disassembler.h"
        "src/component/cpu/z80/z80_opcodes.c"
        "src/component/cpu/z80/z80_opcodes.h"
        "src/component/floppy/generic_floppy.c"
        "src/component/floppy/generic_floppy.h"
        "src/component/floppy/mac_floppy.c"
        "src/component/floppy/mac_floppy.h"
        "src/component/gpu/huc6270/huc6270.c"
        "src/component/gpu/huc6270/huc6270.h"
        "src/component/gpu/huc6260/huc6260.c"
        "src/component/gpu/huc6260/huc6260.h"
        "src/component/misc/via6522/via6522.c"
        "src/component/misc/via6522/via6522.h"
        "src/component/misc/m6532/m6532.c"
        "src/component/misc/m6532/m6532.h"
        "src/helpers/audiobuf.h"
        "src/helpers/audiobuf.c"
        "src/helpers/bit.h"
        "src/helpers/better_irq_multiplexer.c"
        "src/helpers/better_irq_multiplexer.h"
        "src/helpers/bitbuffer.c"
        "src/helpers/bitbuffer.h"
        "src/helpers/buf.c"
        "src/helpers/buf.h"
        "src/helpers/ccircular.c"
        "src/helpers/ccircular.h"
        "src/helpers/color.h"
        "src/helpers/cvec.c"
        "src/helpers/cvec.h"
        "src/helpers/debugger/console.c"
        "src/helpers/debugger/console.h"
        "src/helpers/debugger/dbglog.c"
        "src/helpers/debug.h"
        "src/helpers/debug.c"
        "src/helpers/debugger/debugger.h"
        "src/helpers/debugger/debuggerdefs.h"
        "src/helpers/debugger/disassembly.c"
        "src/helpers/debugger/disassembly.h"
        "src/helpers/debugger/dbglog.h"
        "src/helpers/debugger/events.c"
        "src/helpers/debugger/events.h"
        "src/helpers/debugger/memory.c"
        "src/helpers/debugger/memory.h"
        "src/helpers/debugger/image.c"
        "src/helpers/debugger/image.h"
        "src/helpers/debugger/trace.c"
        "src/helpers/debugger/trace.h"
        "src/helpers/debugger/waveform.c"
        "src/helpers/debugger/waveform.h"
        "src/helpers/debugger/debugger.c"
        "src/helpers/enums.h"
        "src/helpers/elf_helpers.h"
        "src/helpers/elf_helpers.c"
        "src/helpers/file_exists.c"
        "src/helpers/file_exists.h"
        "src/helpers/img.c"
        "src/helpers/img.h"
        "src/helpers/inifile.c"
        "src/helpers/inifile.h"
        "src/helpers/int.h"
        "src/helpers/intrinsics.h"
        "src/helpers/irq_multiplexer.c"
        "src/helpers/irq_multiplexer.h"
        "src/helpers/irq_multiplexer.c"
        "src/helpers/irq_multiplexer.h"
        "src/helpers/irq_multiplexer.c"
        "src/helpers/jsm_string.c"
        "src/helpers/jsm_string.h"
        "src/helpers/ooc.h"
        "src/helpers/pack.h"
        "src/helpers/physical_io.c"
        "src/helpers/physical_io.h"
        "src/helpers/scheduler.c"
        "src/helpers/scheduler.h"
        "src/helpers/serialize/serialize.c"
        "src/helpers/serialize/serialize.h"
        "src/helpers/simplebuf.c"
        "src/helpers/simplebuf.h"
        "src/helpers/sram.c"
        "src/helpers/sram.h"
        "src/helpers/sys_interface.c"
        "src/helpers/sys_interface.h"
        "src/helpers/sys_present.c"
        "src/helpers/sys_present.h"
        "src/helpers/user.c"
        "src/helpers/user.h"
        "src/helpers/wav.c"
        "src/helpers/wav.h"
        "src/ooc/ooc.h"
        "src/system/atari2600/atari2600.c"
        "src/system/atari2600/atari2600.h"
        "src/system/atari2600/atari2600_bus.c"
        "src/system/atari2600/atari2600_bus.h"
        "src/system/atari2600/cart.c"
        "src/system/atari2600/cart.h"
        "src/system/atari2600/tia.c"
        "src/system/atari2600/tia.h"
        "src/system/apple2/apple2.c"
        "src/system/apple2/apple2.h"
        "src/system/apple2/apple2_internal.h"
        "src/system/apple2/apple2_internal.c"
        "src/system/apple2/iou.c"
        "src/system/apple2/iou.h"
        "src/system/apple2/mmu.c"
        "src/system/apple2/mmu.h"
        "src/system/dreamcast/aica_mem.h"
        "src/system/dreamcast/controller.h"
        "src/system/dreamcast/controller.c"
        "src/system/dreamcast/dreamcast.c"
        "src/system/dreamcast/dreamcast.h"
        "src/system/dreamcast/dc_mem.c"
        "src/system/dreamcast/dc_mem.h"
        "src/system/dreamcast/g2.c"
        "src/system/dreamcast/g2.h"
        "src/system/dreamcast/gdi.c"
        "src/system/dreamcast/gdi.h"
        "src/system/dreamcast/gdrom.c"
        "src/system/dreamcast/gdrom.h"
        "src/system/dreamcast/holly.c"
        "src/system/dreamcast/holly.h"
        "src/system/dreamcast/holly_sw.c"
        "src/system/dreamcast/holly_sw.h"
        "src/system/dreamcast/holly_regs.h"
        "src/system/dreamcast/maple.c"
        "src/system/dreamcast/triangle.c"
        "src/system/dreamcast/triangle.h"
        "src/system/galaksija/galaksija.c"
        "src/system/galaksija/galaksija.h"
        "src/system/galaksija/galaksija_bus.c"
        "src/system/galaksija/galaksija_bus.h"
        "src/system/galaksija/galaksija_debugger.c"
        "src/system/galaksija/galaksija_debugger.h"
        "src/system/gb/cart.c"
        "src/system/gb/cart.h"
        "src/system/gb/gb.c"
        "src/system/gb/gb.h"
        "src/system/gb/gb_bus.c"
        "src/system/gb/gb_bus.h"
        "src/system/gb/gb_clock.c"
        "src/system/gb/gb_clock.h"
        "src/system/gb/gb_debugger.c"
        "src/system/gb/gb_debugger.h"
        "src/system/gb/gb_cpu.c"
        "src/system/gb/gb_cpu.h"
        "src/system/gb/gb_enums.h"
        "src/system/gb/gb_ppu.c"
        "src/system/gb/gb_ppu.h"
        "src/system/gb/gb_serialize.c"
        "src/system/gb/gb_serialize.h"
        "src/system/gb/mappers/mapper.c"
        "src/system/gb/mappers/mapper.h"
        "src/system/gb/mappers/mbc1.h"
        "src/system/gb/mappers/mbc1.c"
        "src/system/gb/mappers/mbc2.h"
        "src/system/gb/mappers/mbc2.c"
        "src/system/gb/mappers/mbc3.c"
        "src/system/gb/mappers/mbc5.h"
        "src/system/gb/mappers/mbc5.c"
        "src/system/gb/mappers/no_mapper.c"
        "src/system/gb/mappers/no_mapper.h"
        "src/system/gba/gba.c"
        "src/system/gba/gba.h"
        "src/system/gba/gba_timers.c"
        "src/system/gba/gba_timers.c"
        "src/system/gba/gba_timers.h"
        "src/system/gba/gba_dma.c"
        "src/system/gba/gba_dma.h"
        "src/system/gba/gba_bus.c"
        "src/system/gba/gba_bus.h"
        "src/system/gba/gba_clock.c"
        "src/system/gba/gba_clock.h"
        "src/system/gba/gba_debugger.c"
        "src/system/gba/gba_debugger.h"
        "src/system/gba/gba_ppu.c"
        "src/system/gba/gba_ppu.h"
        "src/system/gba/gba_controller.c"
        "src/system/gba/gba_controller.h"
        "src/system/gba/gba_apu.c"
        "src/system/gba/gba_apu.h"
        "src/system/gba/cart/eeprom.c"
        "src/system/gba/cart/eeprom.h"
        "src/system/gba/cart/flash.c"
        "src/system/gba/cart/flash.h"
        "src/system/gba/cart/gba_cart.c"
        "src/system/gba/cart/gba_cart.h"
        "src/system/gba/cart/sram.c"
        "src/system/gba/cart/sram.h"
        "src/system/genesis/genesis.c"
        "src/system/genesis/genesis.h"
        "src/system/genesis/genesis_bus.c"
        "src/system/genesis/genesis_bus.h"
        "src/system/genesis/genesis_clock.c"
        "src/system/genesis/genesis_clock.h"
        "src/system/genesis/genesis_cart.c"
        "src/system/genesis/genesis_cart.h"
        "src/system/genesis/genesis_controllerport.c"
        "src/system/genesis/genesis_debugger.c"
        "src/system/genesis/genesis_debugger.h"
        "src/system/genesis/genesis_serialize.c"
        "src/system/genesis/genesis_serialize.h"
        "src/system/genesis/genesis_vdp.c"
        "src/system/genesis/genesis_vdp.h"
        "src/system/mac/mac.c"
        "src/system/mac/mac.h"
        "src/system/mac/mac_debugger.c"
        "src/system/mac/mac_debugger.h"
        "src/system/mac/mac_display.c"
        "src/system/mac/mac_display.h"
        "src/system/mac/mac_internal.c"
        "src/system/mac/mac_internal.h"
        "src/system/mac/mac_iwm.c"
        "src/system/mac/mac_iwm.h"
        "src/system/nes/nes.h"
        "src/system/nes/nes.c"
        "src/system/nes/nes_clock.c"
        "src/system/nes/nes_clock.h"
        "src/system/nes/nes_ppu.c"
        "src/system/nes/nes_ppu.h"
        "src/system/nes/nes_cart.c"
        "src/system/nes/nes_cart.h"
        "src/system/nes/nes_cpu.c"
        "src/system/nes/nes_cpu.h"
        "src/system/nes/nes_debugger.c"
        "src/system/nes/nes_debugger.h"
        "src/system/nes/nes_serialize.c"
        "src/system/nes/nes_serialize.h"
        "src/system/nes/mappers/mapper.c"
        "src/system/nes/mappers/mapper.h"
        "src/system/nes/mappers/mapper.h"
        "src/system/nes/mappers/mapper.c"
        "src/system/nes/mappers/mapper.h"
        "src/system/nes/mappers/nrom.c"
        "src/system/nes/mappers/nrom.h"
        "src/system/nes/mappers/mmc3b_dxrom/mmc3b_dxrom.c"
        "src/system/nes/mappers/mmc3b_dxrom/mmc3b_dxrom.h"
        "src/system/nes/mappers/mmc3b_dxrom/a12_watcher.c"
        "src/system/nes/mappers/mmc3b_dxrom/a12_watcher.h"
        "src/system/nes/mappers/axrom.c"
        "src/system/nes/mappers/axrom.h"
        "src/system/nes/mappers/uxrom.c"
        "src/system/nes/mappers/uxrom.h"
        "src/system/nes/mappers/cnrom_gnrom_jf11_jf14_color_dreams.c"
        "src/system/nes/mappers/cnrom_gnrom_jf11_jf14_color_dreams.h"
        "src/system/nes/mappers/mmc1_sxrom.c"
        "src/system/nes/mappers/mmc1_sxrom.h"
        "src/system/nes/mappers/vrc_2b_2e_4f.c"
        "src/system/nes/mappers/vrc_2b_2e_4f.h"
        "src/system/nes/mappers/sunsoft_5_7.c"
        "src/system/nes/mappers/sunsoft_5_7.h"
        "src/system/nes/mappers/mmc5.c"
        "src/system/nes/mappers/mmc5.h"
        "src/system/nes/mappers/nes_memmap.c"
        "src/system/nes/mappers/nes_memmap.h"
        "src/system/nds/nds.c"
        "src/system/nds/nds.h"
        "src/system/nds/nds_apu.c"
        "src/system/nds/nds_apu.h"
        "src/system/nds/nds_bus.c"
        "src/system/nds/nds_bus.h"
        "src/system/nds/nds_clock.c"
        "src/system/nds/nds_clock.h"
        "src/system/nds/nds_controller.c"
        "src/system/nds/nds_controller.h"
        "src/system/nds/nds_debugger.c"
        "src/system/nds/nds_debugger.h"
        "src/system/nds/nds_dma.c"
        "src/system/nds/nds_dma.h"
        "src/system/nds/nds_ipc.c"
        "src/system/nds/nds_ipc.h"
        "src/system/nds/nds_irq.c"
        "src/system/nds/nds_irq.h"
        "src/system/nds/nds_ppu.c"
        "src/system/nds/nds_ppu.h"
        "src/system/nds/nds_regs.h"
        "src/system/nds/nds_rtc.c"
        "src/system/nds/nds_rtc.h"
        "src/system/nds/nds_spi.c"
        "src/system/nds/nds_spi.h"
        "src/system/nds/nds_timers.c"
        "src/system/nds/nds_timers.h"
        "src/system/nds/nds_vram.c"
        "src/system/nds/nds_vram.h"
        "src/system/nds/nds_vram.h"
        "src/system/nds/nds_vram.c"
        "src/system/nds/3d/nds_3dmath.c"
        "src/system/nds/3d/nds_3dmath.h"
        "src/system/nds/3d/nds_ge.c"
        "src/system/nds/3d/nds_ge.h"
        "src/system/nds/3d/nds_re.c"
        "src/system/nds/3d/nds_re.h"
        "src/system/nds/cart/nds_flash.c"
        "src/system/nds/cart/nds_flash.h"
        "src/system/nds/cart/nds_cart.c"
        "src/system/nds/cart/nds_cart.h"
        "src/system/nds/cart/nds_eeprom.c"
        "src/system/nds/cart/nds_eeprom.h"
        "src/system/sms_gg/sms_gg.c"
        "src/system/sms_gg/sms_gg.h"
        "src/system/sms_gg/sms_gg_vdp.c"
        "src/system/sms_gg/sms_gg_vdp.h"
        "src/system/sms_gg/sms_gg_clock.c"
        "src/system/sms_gg/sms_gg_clock.h"
        "src/system/sms_gg/sms_gg_io.c"
        "src/system/sms_gg/sms_gg_io.h"
        "src/system/sms_gg/sms_gg_mapper_sega.c"
        "src/system/sms_gg/sms_gg_mapper_sega.h"
        "src/system/sms_gg/sms_gg_serialize.c"
        "src/system/sms_gg/sms_gg_serialize.h"
        "src/system/sms_gg/smsgg_debugger.c"
        "src/system/sms_gg/smsgg_debugger.h"
        "src/system/snes/gauss_table.h"
        "src/system/snes/r5a22.c"
        "src/system/snes/r5a22.h"
        "src/system/snes/snes.c"
        "src/system/snes/snes.h"
        "src/system/snes/snes_apu.c"
        "src/system/snes/snes_apu.h"
        "src/system/snes/snes_bus.c"
        "src/system/snes/snes_bus.h"
        "src/system/snes/snes_cart.c"
        "src/system/snes/snes_cart.h"
        "src/system/snes/snes_clock.c"
        "src/system/snes/snes_clock.h"
        "src/system/snes/snes_controller_port.c"
        "src/system/snes/snes_controller_port.h"
        "src/system/snes/snes_debugger.c"
        "src/system/snes/snes_debugger.h"
        "src/system/snes/snes_mem.c"
        "src/system/snes/snes_mem.h"
        "src/system/snes/snes_ppu.c"
        "src/system/snes/snes_ppu.h"
        "src/system/snes/snesdefs.h"
        "src/system/ps1/ps1.c"
        "src/system/ps1/ps1.h"
        "src/system/ps1/ps1_bus.c"
        "src/system/ps1/ps1_bus.h"
        "src/system/ps1/ps1_clock.c"
        "src/system/ps1/ps1_clock.h"
        "src/system/ps1/ps1_dma.c"
        "src/system/ps1/ps1_dma.h"
        "src/system/ps1/cdrom/ps1_cdrom.c"
        "src/system/ps1/cdrom/ps1_cdrom.h"
        "src/system/ps1/gpu/ps1_gpu.c"
        "src/system/ps1/gpu/ps1_gpu.h"
        "src/system/ps1/gpu/rasterize_tri.c"
        "src/system/ps1/gpu/rasterize_tri.h"
        "src/system/ps1/gpu/rasterize_line.c"
        "src/system/ps1/gpu/rasterize_line.h"
        "src/system/ps1/gpu/pixel_helpers.c"
        "src/system/ps1/gpu/pixel_helpers.h"
        "src/system/ps1/peripheral/ps1_sio.c"
        "src/system/ps1/peripheral/ps1_sio.h"
        "src/system/ps1/peripheral/ps1_digital_pad.c"
        "src/system/ps1/peripheral/ps1_digital_pad.h"
        "src/system/ps1/ps1_debugger.c"
        "src/system/ps1/ps1_debugger.h"
        "src/system/ps1/timers/ps1_timers.h"
        "src/system/ps1/timers/ps1_timers.c"
        "src/system/ps1/spu/ps1_spu.c"
        "src/system/ps1/spu/ps1_spu.h"
        "src/system/tg16/tg16.c"
        "src/system/tg16/tg16.h"
        "src/system/tg16/tg16_bus.c"
        "src/system/tg16/tg16_bus.h"
        "src/system/tg16/tg16_cart.c"
        "src/system/tg16/tg16_cart.h"
        "src/system/tg16/tg16_clock.c"
        "src/system/tg16/tg16_clock.h"
        "src/system/tg16/tg16_debugger.c"
        "src/system/tg16/tg16_debugger.h"
        "src/system/zxspectrum/zxspectrum.c"
        "src/system/zxspectrum/zxspectrum.h"
        "src/system/zxspectrum/tape_deck.c"
        "src/system/zxspectrum/tape_deck.h"
        "src/system/zxspectrum/ula.c"
        "src/system/zxspectrum/ula.h"
        ".editorconfig"
        src/component/cpu/huc6280/huc6280_disassembler.c
        src/component/controller/tg16b2/tg16b2.c
        src/component/controller/tg16b2/tg16b2.h
        src/system/tg16/tg16_controllerport.c
        src/system/tg16/tg16_controllerport.h
        src/component/audio/huc6280_psg/huc6280_psg.c
        src/component/audio/huc6280_psg/huc6280_psg.h
)

# TODO: Fix elf-parser repo for windows
if(NOT WIN32)
    list(APPEND SOURCE_LIST
        "src/vendor/elf-parser/elf.h"
        "src/vendor/elf-parser/elf-parser.h"
        "src/vendor/elf-parser/elf-parser.c"
    )
endif()

add_library(jsmooch-lib ${SOURCE_LIST})

# CMake 3.24 adds CMAKE_COMPILE_WARNING_AS_ERROR; it is ignored on lower versions.
set_property(TARGET jsmooch-lib PROPERTY COMPILE_WARNING_AS_ERROR ON)

# Compiler-specific options
if (CMAKE_CXX_COMPILER_ID STREQUAL "AppleClang")
    set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Werror")
elseif (CMAKE_CXX_COMPILER_ID STREQUAL "Clang") # Linux Clang
    set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Werror -Wno-format")
elseif (CMAKE_CXX_COMPILER_ID STREQUAL "GNU") # GCC
    set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Werror -Wno-format -Wno-unused-result")
    target_link_libraries(jsmooch-lib PRIVATE m) # link against maths library (-lm) for sh4_interpreter_opcodes.c sqrt/sqrtf
elseif (CMAKE_CXX_COMPILER_ID STREQUAL "MSVC")
    target_compile_options(
        jsmooch-lib
        PRIVATE

        # TODO: Remove these and fix all warnings
        /wd4244 # warning C4244: '=': conversion from 'u64' to 'u8', possible loss of data
        /wd4098 # warning C4098: 'M68k_ins_ADDX': 'void' function returning a value
        /wd4101 # warning C4101: 'unused_variable': unreferenced local variable
        /wd4018 # warning C4018: '<': signed/unsigned mismatch
        /wd4267 # warning C4267: 'initializing': conversion from 'size_t' to 'u32', possible loss of data
    )

    # Allow use of portable fopen (fopen_s is Windows only)
	target_compile_definitions(jsmooch-lib PUBLIC _CRT_SECURE_NO_WARNINGS)
else()
	message(FATAL_ERROR, "Unknown compiler")
endif()

include_directories(src/)

install(TARGETS jsmooch-lib
        LIBRARY DESTINATION lib
        ARCHIVE DESTINATION lib)

# Define grouping for source files in IDE project generation. This is just for Visual Studio IDE convenience.
# Without this, all .cpp files are in the "Source Files" filter, and all .h" files are in the "Header files" filter.
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${SOURCE_LIST}) # Requires CMake 3.8
